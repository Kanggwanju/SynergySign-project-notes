# [SignBell 프로젝트] 2025-10-14 회고록

---

## 📝 작업 개요

* **작업일**: 2025.10.14
* **회고 작성자**: 강관주
* **팀 작업**: 짧은 동기화 회의 (14:00~14:30, 30분)
* **개인 작업**: CreateRoomService 및 GameParticipantRepository 테스트 코드 작성, Postman API 테스트

---

## 👥 팀 미팅 및 작업

### 짧은 동기화 회의 (30분)

각자 해야 할 작업이 명확히 정해져 있어서 30분의 짧은 회의로 효율적으로 진행할 수 있었습니다.

**주요 논의 내용**:
* **인증/인가 코드 리뷰**: 송민재 님의 인증/인가 코드를 리뷰하고, 주석 추가 및 수정 방향을 논의했습니다.
* **마이페이지 담당자 선정**: 와이어프레임 제작 후 개발 착수 방향 확정
* **WebRTC 소스 코드 확인**: Janus 라이브러리 적용 가능성 재검토
* **실시간 퀴즈 기능 역할 분담**: 고동현 님과 역할을 명확히 나눴습니다.
  * **강관주**: 게임 시작 전까지의 기능 (방 생성, 입장, 퇴장, 준비 상태 등)
  * **고동현 님**: 게임 시작부터의 기능 (퀴즈 진행, 문제 출제, 답변 처리, 점수 관리 등)
* **개발 진행 순서**: 인증/인가 코드 병합 후 웹소켓 및 퀴즈 백엔드 개발 시작하기로 결정

**액션 아이템**:
* 송민재 님: 인증/인가 코드 테스트 후 병합, 마이페이지 백엔드 개발 시작
* 강관주, 고동현 님: 웹소켓 로직 추가 및 퀴즈 관련 백엔드 개발 시작
* 신동준 님: 마이페이지 와이어프레임 제작 후 프론트 UI 개발 시작

---

## 👨‍💻 개인 작업

### 1. CreateRoomService 통합 테스트 작성

13일에 구현한 게임 방 생성 기능의 안정성과 신뢰성을 보장하기 위해 통합 테스트 코드를 작성했습니다.

**작성한 테스트 케이스 (총 9개)**:
* ✅ 정상적인 게임 방 생성 및 DB 저장 검증
* ✅ 방장이 GameParticipant로 자동 등록되는지 확인
* ✅ 존재하지 않는 사용자 ID로 방 생성 시 예외 처리
* ✅ WAITING 상태 방에 참여 중인 사용자의 중복 생성 차단
* ✅ 여러 사용자가 독립적으로 방 생성 가능 검증
* ✅ 방 제목 최대 길이(50자) 처리
* ✅ 특수문자 포함 방 제목 저장
* ✅ @Transactional 어노테이션 트랜잭션 동작 검증
* ✅ 유효한 방 제목만 저장되는지 확인

**기술 스택**:
* `@SpringBootTest`: 전체 Spring Context 로드
* `@Transactional`: 각 테스트 후 자동 롤백
* AssertJ: 가독성 높은 단언문 사용
* Given-When-Then 패턴 적용

### 2. GameParticipantRepository 테스트 작성

복잡한 쿼리 메서드의 정확성을 검증하기 위한 테스트 코드를 작성했습니다.

**작성한 테스트 케이스 (총 7개)**:
* ✅ 사용자가 방 생성 후 중복 생성 시도 시나리오
* ✅ 게임 완료(FINISHED) 후 새로운 방 생성 가능 여부
* ✅ 대기 중인 방의 일반 참가자도 중복 방 생성 불가 검증
* ✅ 게임 진행 중(IN_PROGRESS) 사용자의 방 생성 제한
* ✅ 여러 사용자의 독립적인 방 생성 가능
* ✅ 대규모 데이터 환경(100개 방) 성능 테스트 (100ms 이내 응답)
* ✅ 경계값 테스트 (null 사용자 처리)

**검증 메서드**:
```java
existsByParticipantAndGameRoom_StatusIn(User participant, GameRoomStatus... statuses)
```

### 3. User 엔티티 필드명 변경 반영

User 엔티티의 `loginMethod` 필드가 `provider`로 변경됨에 따라 테스트 코드를 수정했습니다.

**변경 내역**:
```java
// 기존
.loginMethod(LoginMethod.KAKAO)

// 변경 후
.provider(LoginMethod.KAKAO)
```

### 4. Postman API 테스트 완료

실제 API 엔드포인트가 정상적으로 동작하는지 검증하기 위해 Postman을 활용한 테스트를 진행했습니다.

**엔드포인트**: `POST /api/quiz/rooms`

**테스트 시나리오 (총 5개)**:
* ✅ 정상 요청: 유효한 토큰 + 유효한 방 제목 → 200 OK
* ✅ 유효성 검증 실패: 빈 문자열 → 400 Bad Request
* ✅ 유효성 검증 실패: 51자 이상 제목 → 400 Bad Request
* ✅ 인증 실패: 토큰 없이 요청 → 401 Unauthorized
* ✅ 중복 방 생성: 이미 참여 중인 사용자 → 409 Conflict

**인증 방식**:
* 카카오 SSO를 통한 액세스 토큰 획득
* HTTP Authorization 헤더에 Bearer 토큰 포함

### 5. PR 작성 및 제출 (#17)

**PR 제목**: `[Test]: CreateRoomService 및 GameParticipantRepository 테스트 코드 작성 및 API 테스트 (#17)`

**주요 내용**:
* 총 16개의 JUnit 테스트 케이스 (CreateRoomService 9개 + GameParticipantRepository 7개)
* 5개의 Postman API 테스트 시나리오
* 스크린샷을 통한 테스트 결과 증빙
* Given-When-Then 패턴을 활용한 명확한 테스트 구조
* 리뷰어를 위한 검토 포인트 명시

---

## 🤔 느낀점

> 13일에 구현한 기능을 14일에 철저히 테스트하면서, 코드의 안정성이 한층 높아지는 것을 느꼈습니다. 단순히 기능이 작동하는 것을 넘어, 모든 예외 케이스와 경계 조건까지 검증하니 코드에 대한 확신이 생겼습니다.
>
> 고동현 님과 실시간 퀴즈 기능의 역할을 명확히 분담한 것도 좋았습니다. 제가 게임 시작 전까지의 기능(방 생성, 입장, 퇴장, 준비 상태 등)을 맡고, 고동현 님이 게임 시작부터의 기능(퀴즈 진행, 문제 출제, 답변 처리, 점수 관리 등)을 맡기로 하면서 각자의 담당 영역이 명확해졌습니다. 이렇게 역할을 나누니 중복 작업 없이 효율적으로 진행할 수 있을 것 같습니다.
>
> GameParticipantRepository의 중복 방 생성 차단 로직을 테스트하면서, 여러 상태(WAITING, IN_PROGRESS, FINISHED)에 따른 동작을 꼼꼼히 검증할 수 있었습니다. 100개 방 존재 시 100ms 이내 응답을 검증하는 성능 테스트를 추가한 것도 의미 있었습니다.
>
> Postman으로 실제 API 엔드포인트를 테스트하면서, JUnit 테스트로는 검증하기 어려운 인증/인가 흐름을 확인할 수 있었습니다. 카카오 SSO 로그인부터 토큰 획득, API 호출까지 전체 플로우가 정상적으로 작동하는 것을 확인하니 뿌듯했습니다. 회의가 30분으로 짧게 끝난 것도 좋았습니다. 각자 해야 할 작업이 명확해서 효율적이었고, 남은 시간을 온전히 개발에 집중할 수 있었습니다.

---

## ✅ 다음 계획

* **15일 작업**: WebSocket을 이용한 방 입장 처리 구현
* **퀴즈 방 입장/퇴장 API**: REST API 구현
* **고동현 님과 협업**: WebSocket 설정을 활용한 실시간 통신 기능 구현
* **테스트 코드 지속 작성**: 새로운 기능 구현 시 테스트 코드도 함께 작성