# [SignBell 프로젝트] 2025-10-29 회고록

---

## 📝 작업 개요

* **작업일**: 2025.10.29
* **작성자**: 강관주
* **팀 작업**: (없음 – 문서 작업 중심의 개인 작업일)
* **개인 작업**: WebSocket 트러블슈팅 문서 4건 추가 및 정리 (PR #94)

---

## 👨‍💻 개인 작업

### 1. WebSocket 트러블슈팅 문서 4건 추가

WebSocket 개발 과정에서 반복적으로 발생하던 주요 문제 4가지를 정리하여  
팀 트러블슈팅 문서 양식에 맞춰 문서화했습니다  
각 문서는 “문제 현상 → 원인 분석 → 해결 방안 → 교훈”의 4단계 구조로 작성되었으며,  
실제 로그와 스크린샷을 포함해 재현 가능하도록 구성했습니다.

**추가된 문서 목록**
1. **서버_WebSocket_예외_클라이언트_전달_문제.md**
  - `@MessageMapping` 예외가 클라이언트로 전달되지 않던 문제
  - `try-catch`와 `SimpMessagingTemplate`로 직접 에러 전송
  - 교훈: REST와 WebSocket의 예외 처리 방식은 다르다

2. **WebSocket_방_퇴장_시_중복_처리_및_예외_발생_문제.md**
  - Controller와 Listener 양쪽에서 퇴장 처리 중복 → 예외 발생률 100%
  - Controller 제거 후, 연결 종료 이벤트로만 퇴장 처리
  - 교훈: 세션 종료는 명시적 메시지보다 더 확실한 퇴장 신호다

3. **WebSocket_인증_정보_주입_실패_문제.md**
  - `@AuthenticationPrincipal` 주입 실패로 사용자 ID 인식 불가
  - `Principal` 파라미터로 대체하여 문제 해결
  - 교훈: WebSocket은 HTTP 인증과 다른 컨텍스트를 가진다

4. **Bean_생성_순환_참조_문제.md**
  - `WebSocketSessionService` ↔ `GameRoomLeaveService` 간 순환 참조 발생
  - 1차 대응: `@Lazy`로 임시 해결
  - 근본 해결: Spring Events 기반 구조로 리팩토링
  - 교훈: 순환 참조는 설계적 신호, 이벤트 기반으로 결합도를 낮춰야 한다

**추가 포인트**
- 문서별 Before/After 비교 코드 포함
- 실제 로그(`gj-ts-1.png`, `gj-ts-2.png`) 첨부
- 팀원들이 참고해 바로 해결할 수 있도록 실용 중심으로 구성

> 이번 작업을 통해 WebSocket 관련 주요 이슈들이 모두 체계적으로 정리되어,  
> 새로 합류한 팀원들도 문제 해결 과정을 한눈에 파악할 수 있게 되었습니다.

---

## 🤔 느낀점

> 오늘은 개발이라기보다 “정리와 회고의 날”이었습니다.  
> 프로젝트 중후반부에 반복적으로 발생하던 문제들을 문서로 남기면서,  
> 기술적 시행착오가 단순한 에러 경험이 아니라 팀의 자산으로 전환된다는 걸 느꼈습니다.  
> 특히 순환 참조나 인증 주입 같은 문제는 앞으로도 재발 가능성이 높아,  
> 이번 문서화가 장기적으로 큰 도움이 될 것 같습니다.

---

## ✅ 다음 계획

* **AWS 배포 준비**
  - CI/CD 환경 점검 및 서비스 구동 테스트
* **문서 최신화**
  - 기능 요구사항 명세서 및 사용자 흐름도 최신 상태로 갱신
* **최종 테스트 시나리오 준비**
  - WebSocket 예외 처리, 퇴장 이벤트, 인증 관련 케이스 중심으로 재점검
